<!DOCTYPE html>
<!-- saved from url=(0069)http://baijiahao.baidu.com/s?id=1600331446644946479&wfr=spider&for=pc -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="referrer" content="always"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"><link rel="shortcut icon" href="https://gss0.bdstatic.com/5bd1bjqh_Q23odCf/static/wiseindex/img/favicon64.ico" type="image/x-icon"><link rel="apple-touch-icon-precomposed" href="https://gss0.bdstatic.com/5bd1bjqh_Q23odCf/static/wiseindex/img/screen_icon_new.png"><title>Ray Tracing in One Weekend 学习笔记</title><link rel="stylesheet" href="./Ray Tracing in One Weekend 学习笔记_files/land_min_pack_6b22d68.css"><meta itemprop="dateUpdate" content="2018-05-13 15:06:58"></head><body style=""><script>/* eslint-disable */var s_domain = {"protocol":"http:","staticUrl":"http://ss.bdimg.com/","base":"","baseuri":"","passconf":"http://passport.baidu.com/ubrwsbas","logout":"https://passport.baidu.com/?logout&u=","bs":"http://www.baidu.com","sp":"http://hi.baidu.com/","ssllist":{"a.hiphotos.baidu.com":"ss0.baidu.com/94o3dSag_xI4khGko9WTAnF6hhy","b.hiphotos.baidu.com":"ss1.baidu.com/9vo3dSag_xI4khGko9WTAnF6hhy","c.hiphotos.baidu.com":"ss3.baidu.com/9fo3dSag_xI4khGko9WTAnF6hhy","d.hiphotos.baidu.com":"ss0.baidu.com/-Po3dSag_xI4khGko9WTAnF6hhy","e.hiphotos.baidu.com":"ss1.baidu.com/-4o3dSag_xI4khGko9WTAnF6hhy","f.hiphotos.baidu.com":"ss2.baidu.com/-vo3dSag_xI4khGko9WTAnF6hhy","g.hiphotos.baidu.com":"ss3.baidu.com/-fo3dSag_xI4khGko9WTAnF6hhy","h.hiphotos.baidu.com":"ss0.baidu.com/7Po3dSag_xI4khGko9WTAnF6hhy","1.su.bdimg.com":"ss0.bdstatic.com/k4oZeXSm1A5BphGlnYG","t10.baidu.com":"ss0.baidu.com/6ONWsjip0QIZ8tyhnq","t11.baidu.com":"ss1.baidu.com/6ONXsjip0QIZ8tyhnq","t12.baidu.com":"ss2.baidu.com/6ONYsjip0QIZ8tyhnq","himg.bdimg.com":"ss1.bdstatic.com/7Ls0a8Sm1A5BphGlnYG","cdn00.baidu-img.cn":"ss0.bdstatic.com/9bA1vGba2gU2pMbfm9GUKT-w","cdn01.baidu-img.cn":"ss0.bdstatic.com/9bA1vGfa2gU2pMbfm9GUKT-w"}};var s_session = {"ssid":"48822f17","logid":"","sid":"26351_1433_21120_20928","nid":"9238334392853898243","qid":""};var s_advert = {"isBjh":"1","contentUrl":"http://baijiahao.baidu.com/s?id=1600331446644946479","contentPlatformId":"3","contentType":"1","pvid":"110eff21804074b9","time":"2018-05-28 16:49:10","contentAccType":"1","ctk":"1b2a4f75eb1440f6","contentAccId":"JQtHFpQGtG96YRY5B","ctk_b":"1d8c0f53e154281d","logid":"2950059449","dtime":"1527497350","grade":"0","createTimeAccLevel":"2"};</script><script>/* eslint-disable */var bds={se:{},su:{urdata:[],urSendClick:function(){},urStatic:"http://ss.bdimg.com"},util:{},use:{},comm:{domain:"",ubsurl:"",tn:"",queryEnc:"",queryId:"",inter:"",sugHost:"",query:"",qid:"",cid:"",sid:"",stoken:"",serverTime:"",user:"",username:"",loginAction:[],useFavo:"",pinyin:"",favoOn:"",curResultNum:"0",rightResultExist:false,protectNum:0,zxlNum:0,pageNum:1,pageSize:10,ishome:1,newindex:1}};var name,navigate,al_arr=[];var selfOpen=window.open;eval("var open = selfOpen;");var isIE=navigator.userAgent.indexOf("MSIE")!=-1&&!window.opera;var E=bds.ecom={};bds.se.mon={loadedItems:[],load:function(){},srvt:-1};try{bds.se.mon.srvt=parseInt(document.cookie.match(new RegExp("(^| )BDSVRTM=([^;]*)(;|$)"))[2]);document.cookie="BDSVRTM=;expires=Sat, 01 Jan 2000 00:00:00 GMT"}catch(e){}var bdUser=bds.comm.user?bds.comm.user:null,bdQuery=bds.comm.query,bdUseFavo=bds.comm.useFavo,bdFavoOn=bds.comm.favoOn,bdCid=bds.comm.cid,bdSid=bds.comm.sid,bdServerTime=bds.comm.serverTime,bdQid=bds.comm.queryId,bdstoken=bds.comm.stoken,login_success=[];</script><div id="detail-page"><div class="line-shadow"></div><div id="content-container" class="content-container clearfix" data-showlog="tid:126;cst:1;logInfo:landing;" data-extralog="flow:2;st:news;rid:9238334392853898243;pos:0;extra:;source:1;isBaijiahao:1;login:1;appId:1588642648813591;" data-ratio="1" data-rid="page"><div class="item-wrap"><div id="header_wrap" class="header_wrap"><div class="header_content"><div class="header_logo"><a href="https://www.baidu.com/" id="result_logo" data-clklog="tid:139;cst:2;logInfo:head_logo;" data-extralog="rid:;pos:;extra:;isBaiJiaHao:1;login:1;" data-rid="head_0"><img src="./Ray Tracing in One Weekend 学习笔记_files/logo_top.png" alt="到百度首页" title="到百度首页"></a></div><div class="header_menu" data-rid="header_menu"><a href="https://www.baidu.com/" class="index" data-clklog="tid:142;cst:2;logInfo:head_menu" data-extralog="rid:;pos:;extra:;isBaiJiaHao:1;login:1;type:backindex" data-rid="head_1">百度首页</a><div id="userBlock" class="login" style="display: inline-block;"><a href="https://passport.baidu.com/v2/?login&amp;tpl=mn&amp;u=http://www.baidu.com" class="login" data-clklog="tid:142;cst:2;logInfo:head_menu;" data-extralog="rid:;pos:;extra:;isBaiJiaHao:1;login:1;type:login" data-rid="head_2">登录</a><a href="http://i.baidu.com/" id="usrname" class="usrname" data-clklog="tid:142;cst:2;logInfo:head_menu;" data-extralog="rid:;pos:;extra:;isBaiJiaHao:1;login:1;type:usrname;" data-rid="head_2"><span id="nametxt">wangluo2028</span><i class="c-icon"></i></a><div id="user_menu" data-showlog="tid:131;cst:1;logInfo:usrmenu;" data-extralog="rid:;pos:;extra:;isBaiJiaHao:1;login:1;" class="s-isindex-wrap s-user-set-menu menu-top" style="display: none;"><div><a href="http://i.baidu.com/center" target="_blank" data-tid="1000" data-clklog="tid:146;cst:2;logInfo:usrmenu;" data-extralog="rid:;pos:1;extra:;isBaiJiaHao:1;login:1;type:center;" data-rid="usr_menu_1">个人中心</a><a href="http://passport.baidu.com/" data-tid="1001" target="_blank" data-clklog="tid:146;cst:2;logInfo:usrmenu;" data-extralog="rid:;pos:2;extra:;isBaiJiaHao:1;login:1;type:passport;" data-rid="usr_menu_2">帐号设置</a><a class="s-feedback" style="overflow:hidden" href="http://baijiahao.baidu.com/s?id=1600331446644946479&amp;wfr=spider&amp;for=pc#" onclick="return false;" data-clklog="tid:146;cst:2;logInfo:usrmenu;" data-extralog="rid:;pos:3;extra:;isBaiJiaHao:1;login:1;type:feedback;" data-rid="header_menu_3">意见反馈</a><a class="quit" style="overflow:hidden" href="https://passport.baidu.com/?logout&amp;u=https://www.baidu.com" data-clklog="tid:146;cst:2;logInfo:usrmenu;" data-extralog="rid:;pos:4;extra:;isBaiJiaHao:1;login:1;type:quit;" data-rid="usr_menu_4">退出</a></div><span class="menu-arrow"><em></em></span></div></div></div></div></div></div><div id="left-container" class="left-container"><div class="item-wrap"><div class="article " id="article" data-islow-browser="0"><div class="article-title"><h2>Ray Tracing in One Weekend 学习笔记</h2></div><div class="article-desc clearfix"><div class="author-icon"><img src="./Ray Tracing in One Weekend 学习笔记_files/timg"></div><div class="author-txt"><p class="author-name">拾零达人</p><div class="article-source"><span class="source">百家号</span><span class="date">05-13</span><span class="time">15:06</span></div></div></div><div class="article-content"><p><span class="bjh-p">《Ray Tracing in One Weekend》 是一本介绍离线渲染光线追踪（以下简称，光追）的入门级教材。作者是 Peter Shirley ，比起这本书，他的 《Fundamentals of Computer Graphics》 更出名一些。</span></p><p><span class="bjh-p">对于现在大多数游戏开发来说，光追的似乎是个完全不沾边的东西，因为游戏必须是实时渲染的，而光追是离线渲染主要使用方法之一。那为什么要学习离线渲染的光线追踪呢？</span></p><p><span class="bjh-p">1、学习光追可以更好地理解渲染中的算法，会明白计算机图形学本质并不在于OpenGL或者DirectX这种API的使用，它还可以更有趣一些；</span></p><p><span class="bjh-p">2、另一个很重要的原因，2018的GDC上，微软和Nvidia联合发布了DX实时光线追踪API ：DirectX Raytracing 。</span></p><p><span class="bjh-p">Unreal 和 Unity 已经可以开始支持这种新的API了，相信不久OpenGL也会推出实时光追。这也意味着，随着硬件的提升，未来的游戏光追会取代光栅化也是很有可能的，游戏画面将可以与电影画面媲美。</span></p><p><span class="bjh-p">想要入门光追技术，这本书一定是非常合适的，虽然是英文（国内没有翻译，甚至连原书都买不到 -_-!），但是只有30多页的内容，而且大多数还是图片和代码，所以一个周末学习完肯定没问题，像我这样比较笨的，两个周末也能搞定，再花一个周末整理总结！如果你不想看原书的话，那就看看这篇文章吧！（注：文末有每一章节代码的下载地址，可编译后自行尝试！）</span></p><p><span class="bjh-p">郑重声明：作者已经将本书的PDF免费公开了，绿色底的图片皆来自原书。</span></p><p><span class="bjh-p">Chapter 0 : Overview</span></p><p><span class="bjh-p">文章的代码是使用C++开发的，因为C++很快，这样你可以使用一些非常简单暴力的方法，也不用太过担心效率和时间问题，对新手来说很容易理解和上手，而且作者基本上没有使用C++的“新特性”，除了继承和重载运算符，基本上你可以将它理解为带类的C，如果你感兴趣，你也可以用Python或Java实现！</span></p><p><span class="bjh-p">Chapter 1 : Output an image</span></p><p><span class="bjh-p">为了方便，全书使用的图片格式都是纯文本PPM格式图片，这里简单介绍一些PPM格式PPM是一种图像文件，由两个部分组成，第一部分是三行ASCII码，决定了图像的格式和存储特征，第二部分是图像的数据部分。更多内容可以查看参考文章 [4]。</span></p><div class="img-container"><img class="normal" width="405px" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=2168688614,2841981800&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">使用这种格式，我们就不用调用各种图片的API来输出了，很多图片查看器都支持这种格式了，注意后缀要改为  .ppm 。当然你要想将它转化成 .jpg 或 .png 来使用，PhotoShop 是个不错的选择。</span></p><p><span class="bjh-p">Chapter 2 : The vec3 class</span></p><p><span class="bjh-p">用于表示三维向量的类，在很多光追渲染器中一般使用四维向量的类，因为颜色分量中要加入Alpha通道，在做矩阵变换的时候需要转换到四维的齐次空间。这里没有使用4D向量因为3D就足够用了。越少的功能就会出越少的错误。</span></p><div class="img-container"><img class="large" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=2191194392,464054173&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">Chapter 3: Rays, a simple camera, and background</span></p><p><span class="bjh-p">既然是光线追踪，我们就需要一个射线对象来模拟光线，我们假设射线的起点是 A，射线的方向是 B ，那么射线上任意一个点的位置 P ，就和射线的传播时间 t 有公式：</span></p><p><span class="bjh-p">P(t) = A + t*B  (1)</span></p><p><span class="bjh-p">如下图所示：</span></p><div class="img-container"><img class="normal" width="501px" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=575443538,3838889883&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">那么我们可以得到Ray的类：</span></p><div class="img-container"><img class="large" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=1056815201,192903108&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">为了得到图像，同样需要一个摄像机，涉及摄像机，首先需要设定一下三维空间，这里采用三维空间坐标系，遵循右手法则。</span></p><p><span class="bjh-p">首先在世界原点创建一个摄像机，摄像机所在的位置就是我们的射线起点，为了得到射线的方向。然后假定我们的屏幕在 z = -1的平面，为了区别宽高，作者习惯创建一个200*100的图片。因为起点在(0,0,0)的位置，则屏幕的世界空间位置就是射线方向，这里用三个变量来表示屏幕上的每一个点：左下角的位置 lower_left_corner，横向的偏移 u，纵向的偏移 v，则屏幕上的每一个点的位置可以表示为，lower_left_corner+ u * horizontal + v * vertical 。horizontal = (4.0,0,0) 和 vertical = (0,2.0,0) 是屏幕在世界空间中的大小，如下图所示：</span></p><div class="img-container"><img class="large" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=4187527431,4136671563&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">然后有了射线之后，我们需要一个背景颜色，这里作者使用的背景颜色是根据，单位化之后的方向向量的 y 坐标做为插值混合 白色(1.0f, 1.0f, 1.0f) 和 蓝色(0.5f, 0.7f, 1.0f)，单位化后 y 坐标的范围是 [-1,1] ，需要 (y+1) * 0.5 将它映射到 [0,1] 。则有：</span></p><div class="img-container"><img class="large" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=4054133631,914448788&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">最终得到的图片：</span></p><div class="img-container"><img class="normal" width="200px" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=1764269498,859066891&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">当然你也可以不这么来处理背景颜色，使用 x坐标 进行混合 或者 使用 z坐标 进行混合 或者其他想法，都可以自行尝试一下。</span></p><p><span class="bjh-p">Chapter 4 : Adding a sphere</span></p><p><span class="bjh-p">接下来我们就要添加一个物体来渲染了，这里我们选择一个非常简单的几何体：球体。为什么说它简单呢！</span></p><p><span class="bjh-p">因为当球心C在(0,0,0)时，球体表面任意一个点 P(x,y,z) 和 半径 r 的关系为：</span></p><p><span class="bjh-p">x * x + y * y + z * z = r * r  (2)，</span></p><p><span class="bjh-p">当球心C在 (cx,cy,cz)  时，则有 :</span></p><p><span class="bjh-p">(x-cx) * (x-cx) + (y-cy) * (y-cy) + (z-cz) * (z-cz)= r * r  (3)，</span></p><p><span class="bjh-p">我们可以用 向量点积的特性将这个式子优化为：</span></p><p><span class="bjh-p">dot((P-C),(P-C)) = r * r  (4)</span></p><p><span class="bjh-p">接下来需要判断射线是否击中球体，如果射线击中球体，则点 P 同时 满足 射线公式(1)，联立公式(1)(3)，可得：</span></p><p><span class="bjh-p">dot((A + t * B - C),(A + t * B - C)) = R * R  (5)</span></p><p><span class="bjh-p">移项推导一下可得：</span></p><p><span class="bjh-p">dot(B,B) * t * t + 2 * dot(B,(A-C)) + dot((A-C),(A-C)) - r * r = 0  (6)</span></p><p><span class="bjh-p">注：原书这里的公式有问题，应该是 B 和 A-C 的点积，但是代码却是对的 -_-!</span></p><p><span class="bjh-p">公式（6）就是一个关于 t  的一元二次方程，求解这个一元二次方程，我们都知道一元二次方程的解有三种情况：两个解，一个解以及无解。正好就对应上直线和球相交的三种情况，两个个交点，一个交点，以及没有交点（代数就是这么神奇~）。</span></p><div class="img-container"><img class="normal" width="495px" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=2078300362,2728353823&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">判断交点情况只需要判断 b * b - 4 * a * c &gt; 0 的真假即可，则可得判断是否碰撞到球体的函数：</span></p><div class="img-container"><img class="large" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=196839517,117749794&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">我们首先在 (0,0,-1)的位置创建一个 半径为 0.5的球体，碰撞到就返回黄色（原书是红色，我不喜欢，看着跟日本国旗似的~），没有则返回背景色，渲染的结果（这里暂时没有处理 t &lt; 0的情况，所以这里的射线可以暂时理解为直线，所以讲小球放在z = +1的位置也能得到这个结果，后面会对它进行处理 ）：</span></p><div class="img-container"><img class="normal" width="200px" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=1152886601,3162899024&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">Chapter 5: Surface normals and multiple objects</span></p><p><span class="bjh-p">有了上面的球体，我们可以进行着色了，要进行着色，肯定需要一个数据，那就是模型的法线，这里球的法线也很好求出，就是从球心 C 指向 射线和球相交的点 P ，如下图所示：</span></p><div class="img-container"><img class="large" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=2865018999,3216504872&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">因为射线和球体有两个交点，不考虑射线起点在物体内的情况，我们通常取第一次碰到的交点，即两个解中的最小值。我们即可求出 t  ，为了将法线输出，可视化显示，我们还需要将法线的xyz分量从 [-1,1] 映射到 [0,1] 。</span></p><div class="img-container"><img class="large" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=1358842635,2763074662&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">我们可以得到这样的结果：</span></p><div class="img-container"><img class="normal" width="200px" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=1992167420,561445728&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">接下来，我们需要创建多个用于渲染的球体，就需要抽象一个类。作者使用的是 “Hitable” 可碰撞的，作为基类的命名，这就因人而异了，用 Object 或者 Surface 就根据自己习惯而定。	同时，为了做渲染，我们需要将碰撞到的点的数据记录下来，需要一个结构体来保存数据。</span></p><p><span class="bjh-p">大多数的光追渲染器都会限制 t  的值在 (tMin,tMax) 之间。这样就能解决上一章节的问题了，这里的光线就不是射线了，就是一个线段。</span></p><p><span class="bjh-p">根据以上分析，我们可以得到 这个抽象类 hitable 和这个结构体 hit_record：</span></p><div class="img-container"><img class="large" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=1250234797,3517827485&amp;fm=173&amp;app=25&amp;f=JPG" data-loaded="0"></div><p><span class="bjh-p">接下来可以改造一下之前实现的球体，将它作为hitable 的实现类。</span></p><div class="img-container"><img class="large" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=1506157714,2517436901&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">这里有一个值得一提的小技巧，在求解一元二次方程时，会涉及一些关于 2 的倍数的运算，将整个式子带入之后，会发现正好能全部约掉，所以干脆一开始就没有计算！</span></p><p><span class="bjh-p">我们需要添加多个对象，所以很容易想到，直接用一个数组保存球体的对象，可以再把碰撞的方法封装一起做成一个新的类，hitable_list ，这个类就有点像Unity 里的Scene类。</span></p><div class="img-container"><img class="large" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=3927399698,4165909130&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">创建一大一小两个球体，渲染结果如下：</span></p><div class="img-container"><img class="normal" width="200px" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=1483232132,3919666993&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">Chapter 6: Antialiasing</span></p><p><span class="bjh-p">可以看到上面的图片有很明显的锯齿，尤其是两个球相交的地方，所以需要进行抗锯齿处理。</span></p><p><span class="bjh-p">这里抗锯齿的方法简单粗暴，以屏幕计算出来的射线点为圆心，单位为1 ，随机生成100个点，如下图所示：</span></p><div class="img-container"><img class="normal" width="499px" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=266794679,1674492913&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">然后以这些点生成射线，最终计算的结果相加，然后除100。主要代码如下：</span></p><div class="img-container"><img class="normal" width="517px" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=1987451814,4157811027&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">使用抗锯齿之后的渲染结果：</span></p><div class="img-container"><img class="normal" width="200px" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=1892665288,1528110597&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">Chapter 7: Diffuse Materials</span></p><p><span class="bjh-p">有了多个物体和抗锯齿，接下来让渲染的结果更真实一些，给它加上一些材质，首先来实现一下Lambertian 漫反射。漫反射物体不会自发光，仅仅接受周围光的影响。光线从漫反射物体表面反射出去的光的方向是随机的。换言之，我们看到漫反射物体表面反射到眼睛的光有可能来自任意一个方向。为什么要这么理解呢，因为我们模拟的射线并不是从光源出发的，而是从摄像机出发的。</span></p><p><span class="bjh-p">当我们向两个物体的夹缝中发射三条射线，他们每一个的结果都是随机的。如下图所示：</span></p><div class="img-container"><img class="large" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=203125282,3407200604&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">接下来就需要模拟随机方向的射线，原本的射线和球体相交点 P ，那么接下来随机生成的新射线的起点肯定是点 P ，那么就需要模拟方向，这里作者是这样实现的（当然不局限于这种方法），假设有一个单位球与我们创建的碰撞体相切与点 P  ，然后，我们在该球体表面取任意一个点 T，这个点 P 到 点 T 的 向量就是我们新射线的方向。</span></p><p><span class="bjh-p">接下来需要得到单位球上随机的点 T ，我们首先得到单位球的球心 TO ，因为P点法线是单位化的，很容易想到，TO = P + P_Normal  ，有了 TO  ，则 T = TO + 随机方向的单位向量。</span></p><p><span class="bjh-p">随机方向的单位向量的获取方法很多，可以随机x y z ，然后单位化。作者使用的方法是，向量的xyz在 -1 到 1 之间取任意一个值，直到该向量的长度大于1。</span></p><p><span class="bjh-p">能量肯定有衰减，也就是一个物体对光的吸收，所以新得到的射线最终返回的颜色会比之前的小，这里用 0.5 作为衰减系数（或者叫吸收率），如果你想设置球体的颜色，可以尝试使用三维变量来做为衰减系数。</span></p><p><span class="bjh-p">根据上面的分析，我们可以得到：</span></p><div class="img-container"><img class="large" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=2364401253,1898543888&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">这样渲染出来的结果：</span></p><div class="img-container"><img class="normal" width="200px" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=3352052704,1022235940&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">这个图片非常黑，是因为所有的图片浏览器认为一张图片都是经过 ” Gamma 矫正过的 “ ，因此我们需要继续Gamma 矫正，这里同样使用最简单的Gamma矫正就是开方。关于Gamma矫正的原因和解决方案，请读者自行查找！</span></p><p><span class="bjh-p">最终渲染的结果：</span></p><div class="img-container"><img class="normal" width="200px" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=1716147587,1711156823&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">Chapter 8: Metal</span></p><p><span class="bjh-p">上面的渲染结果可以看到，这个结果非常像我们只在天光下渲染的灰色非金属球，漫反射材质经常用于模拟非金属物质。我们可以在上一章节实现的漫反射材质基础上抽象一个材质类，这个材质类主要负责两件事：</span></p><p><span class="bjh-p">1、生成一个散射光线（或者说它吸收了入射光线）；</span></p><p><span class="bjh-p">2、如果散射光线，有多少光线会被吸收；</span></p><p><span class="bjh-p">抽象的material 类如下所示：</span></p><div class="img-container"><img class="large" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=2642815764,3485881427&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">每一个被碰撞到的物体都应该有一个材质对象，所以需要在之前的 hit_record  上加上一个材质字段：</span></p><div class="img-container"><img class="large" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=2729291859,1767221628&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">这里用的是三维的吸收率 albedo，这个名词想必很多游戏开发的朋友很熟悉，这个是PBR材质中的漫反射贴图的常用的名字。其实就是物体吸收了除了这个颜色外的其他颜色，所以就会反射到人眼这种颜色。这样就能理解 albedo 这个名词的含义了！</span></p><p><span class="bjh-p">接下来，我们讨论一下金属材质的实现，光滑的金属表面不会随机散射光线，而是特定的方向，这个方向就是我们常说的反射光，入射光和法线的夹角等于反射光和法线的夹角。</span></p><p><span class="bjh-p">求反射光向量需要用到几何数学：</span></p><div class="img-container"><img class="normal" width="292px" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=1520447078,538091898&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">红色的反射向量就是 V + 2B ，由图可知，B 向量是 V 向量在 N 向上的映射的反向向量。则B = - dot(V,N) * N （这里不能理解的参考，向量点积的几何意义）。则 反射向量 = V - 2dot(V,N) * N 。我们就可以得到求反射向量的函数（注意：这里的N 是单位向量，但是V 不是）：</span></p><div class="img-container"><img class="normal" width="421px" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=668205145,520153684&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">添加两个0.5的反照率的金属材质，则可以得到下面渲染的结果：</span></p><div class="img-container"><img class="normal" width="200px" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=2561579629,2808204328&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">上面的渲染结果是基于完全光滑的金属表面，但是实际上金属表面总会是粗糙的，粗糙的表面导致的结果就是，反射向量NR在原本的反射向量R 的基础上发生了一些偏差。为了模拟偏差，我们同样是首先得到一个随机方向的向量T，然后让 R 沿着 T 偏移就得到 NR ，如下图所示：</span></p><div class="img-container"><img class="normal" width="531px" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=3967323708,307281875&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">随机方向的求法，之前Lambertian材质中我们已经实现了， T 向量的长度就是偏移的程度，这个偏移的程度可能每个金属材质的物体都不一样，最终的表现结果是金属表面反射的变得模糊，或者我们可以把这个变量理解为 Roughness  粗糙度。</span></p><p><span class="bjh-p">因为我们最后使用了带有随机性的，所以我们的反射光线需要做一下判断，判断它和法线的夹角是否小于90°，如果大于，那就不是反射光线了，所以返回false，即没有发生反射。</span></p><p><span class="bjh-p">这么一来我们就可以得到metal 材质的类：</span></p><div class="img-container"><img class="large" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=4245522021,2663346376&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">那么我么在创建材质的时候可以指定它的 fuzz 模糊程度。把上次渲染中右边黄色金属球的模糊度改为0.5可得：</span></p><div class="img-container"><img class="normal" width="200px" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=2276266097,2427624452&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">Chapter 9: Dielectrics</span></p><p><span class="bjh-p">像水，玻璃和钻石这种透明的材质都是电介质。光线在这些物质表面会产生两种行为，折射和反射。作者的处理方法是，在折射和反射之间随机选择，每次只产生一个散射的光线。</span></p><p><span class="bjh-p">上一章节已经实现了反射光线，接下来需要考虑折射光线。折射光线的规律通常用Snell 定律来描述：</span></p><p><span class="bjh-p">n sin(theta) = n1 sin(theta1)</span></p><p><span class="bjh-p">n 是物质的折射率（通常空气=1，玻璃= 1.3-1.7 ，钻石 = 2.4），theta 是折射光线和发下你的夹角，如下图所示：</span></p><div class="img-container"><img class="normal" width="319px" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=4085250616,1414892494&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">这里有一个问题，当光线处在一个折射率很大的材质中，Snell 定律无解，所以没有折射光线，光线就会发生 全反射。</span></p><p><span class="bjh-p">我们先求一下折射光线，折射光线的公式推导如下，参考文档[5]：</span></p><p><span class="bjh-p">根据上述推导可以得到我们求折射光线的函数（注意：原书这里的代码图片是错的，v 应该单位化后使用）：</span></p><div class="img-container"><img class="large" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=1186931297,3552191055&amp;fm=173&amp;app=25&amp;f=JPG" data-loaded="0"></div><p><span class="bjh-p">折射光和反射光占的比率在不同的入射角度是不同的，Fresnel 定律描述了这个规律，Fresnel	原本的函数非常复杂，大多数人用 schlick 的近似方程，虽然会导致在角度接近90度的时候出现镜面反射，但是出于简单方便的目的，这里也使用schlick的近似方程：</span></p><div class="img-container"><img class="normal" width="439px" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=2655842093,3863920661&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">根据上面的分析我们可以得到 dielectric 的材质，这里需要注意的是，当入射光线的夹角和法线的夹角（注意区分入射光线方向）小于90度时，表示光线是从物体内部射到物体外部的。法线需要反向，折射率的比值也要改变。最后schlick的大小表示，反射光线和折射光线占的比例。</span></p><div class="img-container"><img class="large" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=419251035,2257425429&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">有了这个，我们就可以渲染一个折射率为1.5的球体看看效果：</span></p><div class="img-container"><img class="normal" width="200px" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=2759322770,186417751&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">关于 dielectric 材质还要一个小技巧，当把半径设置为负数，对球体没有影响，会导致法线向内，半径一正一负两个球叠加起来可以模拟类似肥皂泡的效果：</span></p><div class="img-container"><img class="normal" width="200px" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=1307092336,2763245338&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">Chapter 10: Positionable camera</span></p><p><span class="bjh-p">之前摄像机都是固定在原点，但是我们不可能一直让它一直在这里，我们需要能够定制它的位置来实现渲染一些特殊的效果。</span></p><p><span class="bjh-p">定制Camera ，需要确定：</span></p><p><span class="bjh-p">1、视野大小（fov，Field Of View）；2、宽高比例 aspect = width / height ；3、摄像机的位置lookfrom；4、摄像机看的位置（或者看的方向）lookat；5、摄像机的向上的矢量（vup，View Up）。</span></p><p><span class="bjh-p">前四个比较好理解，第五个 "vup"矢量，是因为我们的摄像机是在三维空间中，我们需要它来构建摄像机空间的正交基向量，不过如果你不想让你的图片滚动旋转（想象头沿着鼻子的方向旋转），这个值一般为世界空间中向上的单位矢量 。</span></p><p><span class="bjh-p">fov，通俗理解就是摄像机的张角大小，如下图所示：</span></p><div class="img-container"><img class="normal" width="467px" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=2479583929,952176748&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">由图可知，窗口高的一半 h  = tan(θ /2) ，然后根据aspect 可以得到窗口的宽。</span></p><p><span class="bjh-p">然后构建摄像机空间的正交基向量，lookfrom 是摄像机空间原点，lookat - lookfrom是 X 基向量，vup 是 Y 基向量，垂直于XY平面并通过 lookfrom 的向量是Z向量，XYZ 三个基向量两两垂直，并符合右手法则。如下图所示：</span></p><div class="img-container"><img class="large" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=1692120609,2065851993&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">有了摄像机，要实现渲染还需要这个摄像机能够生成我们需要的射线，生成的方法和之前固定摄像机的做法一样，用左下角位置和uv方向 偏移来实现。</span></p><p><span class="bjh-p">根据上面的分析我们可以抽象一个camera类：</span></p><div class="img-container"><img class="large" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=356755684,2272807101&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">注意，这里我们的fov是角度值，而tan 函数需要传弧度值，所有需要做转变。</span></p><p><span class="bjh-p">有了camera 之后，我们可以定制一个角度，看看渲染结果：</span></p><div class="img-container"><img class="normal" width="200px" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=1505066725,1393526029&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">Chapter 11: Defocus Blur</span></p><p><span class="bjh-p">焦散模糊，在摄影中一般叫景深。</span></p><p><span class="bjh-p">景深的效果简单理解就是聚焦的平面清晰，而其他平面会变模糊。 景深产生的原理，大家可以查看文档 [6]和[7]，这里就不赘述了。我们这里只关注两个变量：光圈大小和焦距。光圈越大，景深越明显；焦距表示聚焦的是哪个平面。</span></p><p><span class="bjh-p">我们摄像机的位置O的XY 平面单位圆上随机生成一个新的点 O1，O1到聚焦平面的射线为我们新的射线。如图所示：</span></p><div class="img-container"><img class="large" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=1272805934,3868694931&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">单位圆中随机向量和之前的单位球方法一样，模糊的原理和之前抗锯齿类似。</span></p><p><span class="bjh-p">需要注意的是，随着我们的焦距变大，我们虚拟的画布也变大了。因为我们的摄像机是透视的。距离摄像机位置越远，裁剪平面的面积越大。</span></p><p><span class="bjh-p">修改上面的camera类可得：</span></p><div class="img-container"><img class="large" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=2597293918,953585341&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">最后测试一下新的渲染效果：</span></p><div class="img-container"><img class="normal" width="200px" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=1305173662,3343416583&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">Chapter 12: Where next?</span></p><p><span class="bjh-p">生成随机场景，原理很简单，看看代码就行了，这里需要调节图片的像素大小，就调整nx 和 ny 就可以了：</span></p><div class="img-container"><img class="large" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=959455474,4165751112&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">光线追踪和离线渲染方面，我也是个萌新，这里就直接上原文了：</span></p><p><span class="bjh-p">1、Lights. You can do this explicitly, by sending shadow rays to lights. Or it can be done implicitly by making some objects emit light,</span></p><p><span class="bjh-p">2、biasing scattered rays toward them, and then downweighting those rays to cancel out the bias. Both work. I am in the minority in favoring the latter approach.</span></p><p><span class="bjh-p">3、Triangles. Most cool models are in triangle form. The model I/O is the worst and almost everybody tries to get somebody else’s code to do this.</span></p><p><span class="bjh-p">4、Surface textures. This lets you paste images on like wall paper. Pretty easy and a good thing to do.</span></p><p><span class="bjh-p">5、Solid textures. Ken Perlin has his code online. Andrew Kensler has some very cool info at his blog.</span></p><p><span class="bjh-p">6、Volumes and media. Cool stuff and will challenge your software architecture. I favor making volumes have the hitable interface and probabilistically have intersections based on density. Your rendering code doesn’t even have to know it has volumes with that method.</span></p><p><span class="bjh-p">7、Parallelism. Run N copies of your code on N cores with different random seeds. Average the N runs. This averaging can also be done hierarchically where N/2 pairs can be averaged to get N/4 images, and pairs of those can be averaged. That method of parallelism should extend well into the thousands of cores with very little coding.</span></p><p><span class="bjh-p">推荐接下来阅读：《Ray Tracing The Next Week》《An Introduction to Ray Tracing》《Ray Tracing from the Ground Up》《Fundamentals of Computer Graphics》《Physically Based Rendering, Third Edition 》</span></p><p><span class="bjh-p">嗯，这些书都是英文的，而且没有中文翻译版 -_-!</span></p><p><span class="bjh-p">还有这本：《全局光照技术：从离线到实时渲染》，作者是秦春林，书的网站 www.thegibook.com</span></p><p><span class="bjh-p">最后以本书封面图结尾：</span></p><div class="img-container"><img class="large" data-loadfunc="0" src="./Ray Tracing in One Weekend 学习笔记_files/u=1454713069,2165649541&amp;fm=173&amp;app=25&amp;f=JPEG" data-loaded="0"></div><p><span class="bjh-p">参考文章</span></p><p><span class="bjh-p">[1] 本书GitHub： https://github.com/petershirley/raytracinginoneweekend</span></p><p><span class="bjh-p">[2] CSDN上相关博客： https://blog.csdn.net/libing_zeng/article/details/72598060</span></p><p><span class="bjh-p">[3] 知乎相关文章： https://zhuanlan.zhihu.com/p/24332329</span></p><p><span class="bjh-p">[4] PPM 文件格式详解：https://www.cnblogs.com/hnrainll/archive/2011/06/08/2075629.html</span></p><p><span class="bjh-p">[5] 折射向量推导： https://blog.csdn.net/yinhun2012/article/details/79472364</span></p><p><span class="bjh-p">[6] 景深wiki： https://zh.wikipedia.org/zh/%E6%99%AF%E6%B7%B1</span></p><p><span class="bjh-p">[7]  基于光线追踪的渲染中景深（Depth of field）效果的实现 :  http://www.cnblogs.com/AirGuanZ/p/6363175.html</span></p></div><div class="notice"><p>本文由百家号作者上传并发布，百家号仅提供信息发布平台。文章仅代表作者个人观点，不代表百度立场。未经作者许可，不得转载。</p></div><audio height="0" width="0" id="musicAudio" data-play-index=""><source></audio></div></div></div><div id="right-container" class="right-container"><div class="item-wrap"><div class="author"><div class="author-info clearfix"><div class="author-icon"><img src="./Ray Tracing in One Weekend 学习笔记_files/timg"></div><div class="author-txt"><p class="author-name">拾零达人</p><div class="article-source"><span class="source">百家号</span><span>最近更新：</span><span class="date">05-13</span><span class="time">15:06</span></div></div></div><div class="author-desc"><p>简介:心里的痛，总是借助文字来化解。</p></div></div></div><div class="item-wrap"><div class="recent-article" data-pos=""><h2>作者最新文章<ul><li data-showlog="tid:135;cst:1;logInfo:recent_article;" data-extralog="rid:;pos:0;extra:;isBaiJiaHao:1;login:1;" data-rid="recent_article_0"><h3 class="item-title"><a href="https://mbd.baidu.com/newspage/data/landingsuper?context=%7B%22nid%22%3A%22news_8910702742489843247%22%7D&amp;n_type=1&amp;p_from=3" data-clklog="tid:147;cst:2;logInfo:recent_article;" data-extralog="rid:;pos:0;extra:;isBaiJiaHao:1;login:1;" target="_blank">馋宗公案之探海匙</a></h3><div class="item-desc hide"><span class="info-date">05-28</span><span class="info-time">15:48</span></div></li><li data-showlog="tid:135;cst:1;logInfo:recent_article;" data-extralog="rid:;pos:1;extra:;isBaiJiaHao:1;login:1;" data-rid="recent_article_1"><h3 class="item-title"><a href="https://mbd.baidu.com/newspage/data/landingsuper?context=%7B%22nid%22%3A%22news_9771663348462198269%22%7D&amp;n_type=1&amp;p_from=3" data-clklog="tid:147;cst:2;logInfo:recent_article;" data-extralog="rid:;pos:1;extra:;isBaiJiaHao:1;login:1;" target="_blank">聚焦中考 | 这些句子随便用一句，都能让你的考场作文出彩！</a></h3><div class="item-desc hide"><span class="info-date">05-28</span><span class="info-time">15:47</span></div></li><li data-showlog="tid:135;cst:1;logInfo:recent_article;" data-extralog="rid:;pos:2;extra:;isBaiJiaHao:1;login:1;" data-rid="recent_article_2"><h3 class="item-title"><a href="https://mbd.baidu.com/newspage/data/landingsuper?context=%7B%22nid%22%3A%22news_9124106211321653695%22%7D&amp;n_type=1&amp;p_from=3" data-clklog="tid:147;cst:2;logInfo:recent_article;" data-extralog="rid:;pos:2;extra:;isBaiJiaHao:1;login:1;" target="_blank">《晨心一得》一段视频背后的邪恶</a></h3><div class="item-desc hide"><span class="info-date">05-28</span><span class="info-time">15:47</span></div></li></ul></h2></div></div><div class="item-wrap"><div class="related-news"><div class="news-content "><h2>相关文章</h2><ul><li data-showlog="tid:136;cst:1;logInfo:related_news;" data-extralog="flow:2;rid:;pos:0;extra:;isBaiJiaHao:1;login:1;" data-rid="related_news_0"><div class="item-content clearfix"><div class="news-pic"><a class="upgrade" data-clklog="tid:148;cst:2;logInfo:related_news;" data-extralog="rid:;pos:0;extra:;isBaiJiaHao:1;login:1;type:&#39;img&#39;" href="https://mbd.baidu.com/newspage/data/landingsuper?context=%7B%22nid%22%3A%22news_9598961115722313428%22%7D&amp;n_type=1&amp;p_from=4" target="_blank"><img src="./Ray Tracing in One Weekend 学习笔记_files/u=2759402550,3973103872&amp;fm=173&amp;app=25&amp;f=JPEG"></a></div><div class="news-info"><div class="news-title"><h3><a class="upgrade" data-clklog="tid:148;cst:2;logInfo:related_news;" data-extralog="rid:;pos:0;extra:;isBaiJiaHao:1;login:1;type:&#39;title&#39;" href="https://mbd.baidu.com/newspage/data/landingsuper?context=%7B%22nid%22%3A%22news_9598961115722313428%22%7D&amp;n_type=1&amp;p_from=4" target="_blank">Epic CEO：3A大作现在应该考虑使用光线追踪</a></h3></div><div class="news-desc"><span class="info-num">3DMGAME</span><span class="info-date">05-06</span></div></div></div></li><li data-showlog="tid:136;cst:1;logInfo:related_news;" data-extralog="flow:2;rid:;pos:1;extra:;isBaiJiaHao:1;login:1;" data-rid="related_news_1"><div class="item-content clearfix"><div class="news-pic"><a class="upgrade" data-clklog="tid:148;cst:2;logInfo:related_news;" data-extralog="rid:;pos:1;extra:;isBaiJiaHao:1;login:1;type:&#39;img&#39;" href="https://mbd.baidu.com/newspage/data/landingsuper?context=%7B%22nid%22%3A%22news_15365051208247812812%22%7D&amp;n_type=1&amp;p_from=4" target="_blank"><img src="./Ray Tracing in One Weekend 学习笔记_files/u=489295684,1685777810&amp;fm=173&amp;app=25&amp;f=JPEG"></a></div><div class="news-info"><div class="news-title"><h3><a class="upgrade" data-clklog="tid:148;cst:2;logInfo:related_news;" data-extralog="rid:;pos:1;extra:;isBaiJiaHao:1;login:1;type:&#39;title&#39;" href="https://mbd.baidu.com/newspage/data/landingsuper?context=%7B%22nid%22%3A%22news_15365051208247812812%22%7D&amp;n_type=1&amp;p_from=4" target="_blank">支持Vulkan API！ NVIDIA光线追踪迈出一大步</a></h3></div><div class="news-desc"><span class="info-num">凤凰科技</span><span class="info-date">05-08</span></div></div></div></li><li data-showlog="tid:136;cst:1;logInfo:related_news;" data-extralog="flow:2;rid:;pos:2;extra:;isBaiJiaHao:1;login:1;" data-rid="related_news_2"><div class="item-content clearfix"><div class="news-pic"><a class="upgrade" data-clklog="tid:148;cst:2;logInfo:related_news;" data-extralog="rid:;pos:2;extra:;isBaiJiaHao:1;login:1;type:&#39;img&#39;" href="https://mbd.baidu.com/newspage/data/landingsuper?context=%7B%22nid%22%3A%22news_9952765613847286797%22%7D&amp;n_type=1&amp;p_from=4" target="_blank"><img src="./Ray Tracing in One Weekend 学习笔记_files/u=559801790,71505759&amp;fm=173&amp;app=25&amp;f=JPEG"></a></div><div class="news-info"><div class="news-title"><h3><a class="upgrade" data-clklog="tid:148;cst:2;logInfo:related_news;" data-extralog="rid:;pos:2;extra:;isBaiJiaHao:1;login:1;type:&#39;title&#39;" href="https://mbd.baidu.com/newspage/data/landingsuper?context=%7B%22nid%22%3A%22news_9952765613847286797%22%7D&amp;n_type=1&amp;p_from=4" target="_blank">光线追踪需要多强的硬件？三块GTX 1080显卡就差不多了</a></h3></div><div class="news-desc"><span class="info-num">黄金植物</span><span class="info-date">05-08</span></div></div></div></li><li data-showlog="tid:136;cst:1;logInfo:related_news;" data-extralog="flow:2;rid:;pos:3;extra:;isBaiJiaHao:1;login:1;" data-rid="related_news_3"><div class="item-content clearfix"><div class="news-pic"><a class="upgrade" data-clklog="tid:148;cst:2;logInfo:related_news;" data-extralog="rid:;pos:3;extra:;isBaiJiaHao:1;login:1;type:&#39;img&#39;" href="https://mbd.baidu.com/newspage/data/landingsuper?context=%7B%22nid%22%3A%22news_9857883395341678521%22%7D&amp;n_type=1&amp;p_from=4" target="_blank"><img src="./Ray Tracing in One Weekend 学习笔记_files/u=256185338,1625200715&amp;fm=173&amp;app=25&amp;f=JPEG"></a></div><div class="news-info"><div class="news-title"><h3><a class="upgrade" data-clklog="tid:148;cst:2;logInfo:related_news;" data-extralog="rid:;pos:3;extra:;isBaiJiaHao:1;login:1;type:&#39;title&#39;" href="https://mbd.baidu.com/newspage/data/landingsuper?context=%7B%22nid%22%3A%22news_9857883395341678521%22%7D&amp;n_type=1&amp;p_from=4" target="_blank">买显卡还是等20系列？这有你想要的！</a></h3></div><div class="news-desc"><span class="info-num">京东数码控</span><span class="info-date">05-08</span></div></div></div></li><li data-showlog="tid:136;cst:1;logInfo:related_news;" data-extralog="flow:2;rid:;pos:4;extra:;isBaiJiaHao:1;login:1;" data-rid="related_news_4"><div class="item-content clearfix"><div class="news-pic"><a class="upgrade" data-clklog="tid:148;cst:2;logInfo:related_news;" data-extralog="rid:;pos:4;extra:;isBaiJiaHao:1;login:1;type:&#39;img&#39;" href="https://mbd.baidu.com/newspage/data/landingsuper?context=%7B%22nid%22%3A%22news_10436659036381162009%22%7D&amp;n_type=1&amp;p_from=4" target="_blank"><img src="./Ray Tracing in One Weekend 学习笔记_files/u=3376734046,1523699267&amp;fm=173&amp;app=25&amp;f=JPEG"></a></div><div class="news-info"><div class="news-title"><h3><a class="upgrade" data-clklog="tid:148;cst:2;logInfo:related_news;" data-extralog="rid:;pos:4;extra:;isBaiJiaHao:1;login:1;type:&#39;title&#39;" href="https://mbd.baidu.com/newspage/data/landingsuper?context=%7B%22nid%22%3A%22news_10436659036381162009%22%7D&amp;n_type=1&amp;p_from=4" target="_blank">如何提升学生的笔记速度？2个技巧让孩子快速记下任何资讯</a></h3></div><div class="news-desc"><span class="info-num">指向课堂</span><span class="info-date">05-09</span></div></div></div></li></ul></div></div><div id="relateAd" ad-id="relate-js" class="wangmeng-ad" data-showlog="tid:369;cst:1;logInfo:adsjs;" data-clklog="tid:370;cst:2;logInfo:adsjs;" data-extralog="rid:;pos:5;extra:;baijiahao:1;login:1;"></div></div></div></div><div id="bottom-container" class="bottom-container "><div class="copy-right"><div class="baidu-info"><a class="sethome" href="http://www.baidu.com/cache/sethelp/index.html" target="_blank"><span>设为首页</span></a><span class="copyright-text"><span>©&nbsp;Baidu&nbsp;</span><a href="http://www.baidu.com/duty/" target="_blank">使用百度前必读</a>&nbsp;<a href="http://jianyi.baidu.com/" target="_blank">意见反馈</a>&nbsp;<span>京ICP证030173号&nbsp;</span><img width="13" height="16" src="./Ray Tracing in One Weekend 学习笔记_files/copy_rignt_24.png"></span></div><div class="recordcode"><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11000002000001" target="_blank"><i></i>京公网安备11000002000001号</a></div></div><div class="back-to-top" data-showlog="tid:133;cst:1;logInfo:back_to_top;" data-clklog="tid:138;cst:2;logInfo:back_to_top;" data-extralog="rid:;pos:;extra:;isBaiJiaHao:1;login:1;" data-rid="back_to_top"><div class="icon-text"><span>返回顶部</span></div><div class="icon-arrow"><span></span></div></div></div></div><script type="text/javascript">window.onload = function () {var contentContainer = document.getElementById('content-container');var bottomContainer = document.getElementById('bottom-container');var rightContainer = document.getElementById('right-container');var minContentHeight = window.innerHeight - bottomContainer.offsetHeight;if (contentContainer.offsetHeight < minContentHeight) {contentContainer.style.height = minContentHeight + 'px';bottomContainer.className += ' fixed';}if (rightContainer.children.length === 0) {rightContainer.style.width = parseInt(rightContainer.offsetWidth + 1, 10) + 'px';}};</script><script type="text/javascript" src="./Ray Tracing in One Weekend 学习笔记_files/jquery_0affbc1.js.下载"></script><script type="text/javascript" src="./Ray Tracing in One Weekend 学习笔记_files/land_min_pack_a8e416f.js.下载"></script><script type="text/javascript" src="./Ray Tracing in One Weekend 学习笔记_files/index_648df39.js.下载"></script><script src="https://cpro.baidustatic.com/cpro/ui/c.js?v=201842910"></script></body></html>